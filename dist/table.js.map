{"version":3,"sources":["../src/table.js"],"names":["Table","id","name","options","columns","indexes","Object","keys","key","opts","Error","push","allowNull","hasParameters","type","column","Column"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEqBA,K;AACnB,iBAAYC,EAAZ,EAAgBC,IAAhB,EAAsBC,OAAtB,EAA+B;AAAA;;AAC7B,SAAKF,EAAL,GAAUA,EAAV;AACA,SAAKC,IAAL,GAAYA,QAAQD,EAApB;AACA,SAAKG,OAAL,GAAe,EAAf;AACA,SAAKC,OAAL,GAAe,EAAf;;AAEAF,cAAUA,WAAW,EAArB;;AAN6B;AAAA;AAAA;;AAAA;AAQ7B,2BAAkBG,OAAOC,IAAP,CAAYJ,OAAZ,CAAlB,8HAAwC;AAAA,YAA7BK,GAA6B;;AACtC,aAAKA,GAAL,IAAYL,QAAQK,GAAR,CAAZ;AACD;AAV4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAW9B;;;;6BAEQC,I,EAAM;AACb,UAAI,CAACA,KAAKL,OAAV,EAAmB;AACjB,cAAM,IAAIM,KAAJ,CAAU,gCAAV,CAAN;AACD;;AAED,WAAKL,OAAL,CAAaM,IAAb,CAAkBF,IAAlB;AACD;;;8BAESA,I,EAAM;AACd,UAAIA,KAAKR,EAAL,IAAW,IAAf,EAAqB;AACnBQ,aAAKR,EAAL,GAAUQ,KAAKP,IAAf;AACD;;AAED,UAAIO,KAAKP,IAAL,IAAa,IAAjB,EAAuB;AACrBO,aAAKP,IAAL,GAAYO,KAAKR,EAAjB;AACD;;AAED,UAAIQ,KAAKG,SAAL,IAAkB,IAAtB,EAA4B;AAC1BH,aAAKG,SAAL,GAAiB,IAAjB;AACD;;AAED,UAAMC,gBAAgBJ,KAAKR,EAAL,IAAWQ,KAAKP,IAAhB,IAAwBO,KAAKK,IAAnD;;AAEA,UAAI,CAACD,aAAL,EAAoB;AAClB,cAAM,IAAIH,KAAJ,CAAU,wCAAV,CAAN;AACD;;AAED,UAAMK,SAAS,IAAIC,gBAAJ,CAAWP,IAAX,CAAf;;AAEA,WAAKL,OAAL,CAAaO,IAAb,CAAkBI,MAAlB;;AAEA,aAAO,IAAP;AACD;;;;;;kBA9CkBf,K","file":"table.js","sourcesContent":["import Column from './column';\n\nexport default class Table {\n  constructor(id, name, options) {\n    this.id = id;\n    this.name = name || id;\n    this.columns = [];\n    this.indexes = [];\n\n    options = options || {};\n\n    for (const key of Object.keys(options)) {\n      this[key] = options[key];\n    }\n  }\n\n  addIndex(opts) {\n    if (!opts.columns) {\n      throw new Error('must provide columns parameter');\n    }\n\n    this.indexes.push(opts);\n  }\n\n  addColumn(opts) {\n    if (opts.id == null) {\n      opts.id = opts.name;\n    }\n\n    if (opts.name == null) {\n      opts.name = opts.id;\n    }\n\n    if (opts.allowNull == null) {\n      opts.allowNull = true;\n    }\n\n    const hasParameters = opts.id && opts.name && opts.type;\n\n    if (!hasParameters) {\n      throw new Error('must provide id, name, type parameters');\n    }\n\n    const column = new Column(opts);\n\n    this.columns.push(column);\n\n    return this;\n  }\n}\n"]}